# システム概要

## 1. アプリケーション概要

**アプリケーション名**: Todo リスト
**バージョン**: 1.0.0
**概要**: タスクの作成・管理・進捗追跡ができるWebアプリケーション

## 2. 技術スタック

### バックエンド
| 項目 | 技術/バージョン |
|------|----------------|
| 言語 | TypeScript |
| ランタイム | Node.js |
| フレームワーク | Express.js ^4.18.2 |
| CORS | cors ^2.8.5 |
| データストレージ | インメモリ（配列） |

### フロントエンド
| 項目 | 技術 |
|------|------|
| マークアップ | HTML5 |
| スタイル | CSS3（CSS変数使用） |
| スクリプト | Vanilla JavaScript (ES6+) |
| 通信 | Fetch API |

### 開発ツール
| 項目 | 技術/バージョン |
|------|----------------|
| TypeScript | ^5.3.3 |
| ts-node | ^10.9.2 |
| nodemon | ^3.0.2 |
| @types/express | ^4.17.21 |
| @types/cors | ^2.8.17 |
| @types/node | ^20.10.0 |

## 3. ディレクトリ構成

```
sample-app/
├── backend/
│   ├── src/
│   │   ├── app.ts                    # サーバーエントリーポイント
│   │   ├── models/
│   │   │   └── Task.ts               # データモデル・型定義
│   │   ├── controllers/
│   │   │   └── TaskController.ts     # HTTPリクエストハンドラー
│   │   ├── services/
│   │   │   └── TaskService.ts        # ビジネスロジック
│   │   └── routes/
│   │       └── taskRoutes.ts         # ルーティング定義
│   ├── package.json
│   ├── package-lock.json
│   └── tsconfig.json
├── frontend/
│   ├── index.html                    # メインHTML
│   ├── app.js                        # フロントエンドロジック
│   └── styles.css                    # スタイル定義
└── README.md
```

## 4. アーキテクチャ

### レイヤー構成（バックエンド）

```
[クライアント]
     ↓ HTTP Request
[Routes] taskRoutes.ts
     ↓ ルーティング
[Controller] TaskController.ts
     ↓ リクエスト処理
[Service] TaskService.ts
     ↓ ビジネスロジック
[Model] Task.ts (インメモリ配列)
```

### 責務分離

| レイヤー | ファイル | 責務 |
|---------|---------|------|
| Routes | taskRoutes.ts | URLパスとコントローラーメソッドのマッピング |
| Controller | TaskController.ts | HTTPリクエスト/レスポンス処理、バリデーション |
| Service | TaskService.ts | ビジネスロジック、データ操作 |
| Model | Task.ts | データ構造定義、型定義 |

## 5. サーバー設定

### ポート
- **デフォルト**: 3000
- **環境変数**: `PORT` で変更可能

### ミドルウェア
1. **CORS**: フロントエンドからのクロスオリジンリクエストを許可
2. **express.json()**: JSONボディのパース
3. **express.urlencoded()**: URLエンコードされたボディのパース

### エンドポイント一覧
| パス | 説明 |
|------|------|
| `/` | ルートエンドポイント（API情報） |
| `/health` | ヘルスチェック |
| `/api/tasks` | タスクAPI |

## 6. 起動方法

### バックエンド
```bash
cd backend

# 依存パッケージインストール
npm install

# 開発モード（ホットリロード）
npm run dev

# 通常起動
npm start

# ビルド
npm run build

# ビルド後起動
npm run serve
```

### フロントエンド
```bash
# 任意のHTTPサーバーで frontend/ を配信
# 例: Live Server (VS Code拡張)
# 例: npx serve frontend
```

## 7. 依存パッケージ

### dependencies
```json
{
  "express": "^4.18.2",
  "cors": "^2.8.5"
}
```

### devDependencies
```json
{
  "typescript": "^5.3.3",
  "ts-node": "^10.9.2",
  "nodemon": "^3.0.2",
  "@types/express": "^4.17.21",
  "@types/cors": "^2.8.17",
  "@types/node": "^20.10.0"
}
```

## 8. TypeScript設定

### tsconfig.json
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules"]
}
```
